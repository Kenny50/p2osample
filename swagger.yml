openapi: 3.0.0
info:
  title: 金玉峰投顧 api
  description: 三個平台的 podcast 資料 api，前台、後台頭像上傳
  version: 11.21.1627
servers:
  - url: https://jinyufeng-dev-api.jinyufeng.com.tw
    description: dev
  - url: http://localhost:3020
    description: local
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
    noauthAuth:
      type: http
      scheme: noauth
security:
  - bearerAuth: []
tags:
  - name: 會員
  - name: 文章
    description: |-
      type 是指資料類型， source 指某類型的來源(針對 youtube 類型，每個頻道都是一種 source)

      article type:  
      0 -> podcast, 1 -> tiptap article, 2 -> youtube, 3 -> news

      source:  
      null -> 文章、podcast, 0 -> 金玉峰 yt 頻道, 1 -> 股耐 yt 頻道

      topic:

      0->全部, 1 -> 基礎面, 2 -> 技術面,3 -> 籌碼面,4 -> 其他
  - name: 後台
  - name: 後台 > 文章
  - name: 後台 > 圖片
  - name: 後台 > 帳戶
  - name: 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
  - name: 後台 > 訂閱 & 發票
  - name: 後台 > 試閱
  - name: 後台 > 公司群組
  - name: 後台 > podcast
  - name: 標籤、主題
  - name: Banner
  - name: 新聞
    description: rate, 1 -> positive, 0 -> neutral, -1 -> negative
  - name: 搜尋
    description: |-
      type 是指資料類型， source 指某類型的來源(針對 youtube 類型，每個頻道都是一種 source)

      article type:  
      0 -> podcast, 1 -> tiptap article, 2 -> youtube, 3 -> news

      source:  
      null -> 文章、podcast, 0 -> 金玉峰 yt 頻道, 1 -> 股耐 yt 頻道

      topic:

      0->全部, 1 -> 基礎面, 2 -> 技術面,3 -> 籌碼面,4 -> 其他
  - name: 訂閱
  - name: 試閱
paths:
  /api/login/google:
    post:
      tags:
        - 會員
      summary: google login
      description: >-
        ```

        GOOGLE_CLIENT_ID=286825346535-u9i330mtainbb3cog1ctdjm15htvekjv.apps.googleusercontent.com

         ```
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - idToken
              properties:
                idToken:
                  type: string
                  description: google response code in query
                  example: >-
                    4/0AfJohXkps1nnw7xGjupUsTXxRrycyPnJro_gqS5VuXD_NcCjb8cn-R_tIgr7aTIJK6ellA
                redirectUrl:
                  type: string
                  example: http://localhost:5173
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  accessToken: YOUR_ACCESS_TOKEN
                  refreshToken: YOUR_REFRESH_TOKEN
  /api/auth/google:
    get:
      tags:
        - 會員
      summary: get auth google url
      description: 會重導向，沒有 response
      parameters:
        - name: redirectUrl
          in: query
          schema:
            type: string
          example: http://localhost:5173
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/auth/line:
    post:
      tags:
        - 會員
      summary: line login
      description: 'project id : 2001662721'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - idToken
              properties:
                idToken:
                  type: string
                  description: line id token
                  example: rInpDPT9ywy7bhVdWgsS
                redirectUrl:
                  type: string
                  example: https://www.google.com
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  accessToken: YOUR_ACCESS_TOKEN
                  refreshToken: YOUR_REFRESH_TOKEN
        '400':
          description: Bad Request
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: Request failed with status code 400
  /api/member/refresh-token:
    post:
      tags:
        - 會員
      summary: refresh token
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  description: ''
                  example: '{{refresh_token}}'
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  accessToken: YOUR_ACCESS_TOKEN
  /api/member/update-information:
    post:
      tags:
        - 會員
      summary: update personal information
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 永翰
                email:
                  type: string
                  example: yunghancareer@gmail.com
                phone:
                  type: integer
                  example: '0936965814'
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  name: 永翰
                  email: hello@gmail.com
                  id: ea514474-4ed6-4e08-b59d-e7158c08fe92
                  avatar: >-
                    https://lh3.googleusercontent.com/a/ACg8ocJdBkMHHg9SweA2gsH6kYGNG1hjwYK7yyWHESWZUd1Pgdo=s96-c
                  loginType: google
                  thirdPartyIdentifier: '112345303661950802160'
                  isEmailValidate: false
                  isSubscribing: false
                  phone: '0936965814'
                  isPhoneValidate: false
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: 此電子郵箱已被使用
  /api/member/sent-validate-sms:
    get:
      tags:
        - 會員
      summary: 寄驗證簡訊
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: your email is already validated
        '202':
          description: Accepted
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: validate sms has sent, please check out your phone
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: email field is empty
  /api/member/information:
    get:
      tags:
        - 會員
      summary: 個人資訊
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  name: Chang Kenneth
                  email: kennethchangla@gmail.com
                  id: ea514474-4ed6-4e08-b59d-e7158c08fe92
                  avatar: >-
                    https://lh3.googleusercontent.com/a/ACg8ocJdBkMHHg9SweA2gsH6kYGNG1hjwYK7yyWHESWZUd1Pgdo=s96-c
                  loginType: google
                  thirdPartyIdentifier: '112345303661950802160'
                  isEmailValidate: true
                  isSubscribing: false
                  phone: ''
                  isPhoneValidate: false
                  latestSubscription:
                    id: 2
                    memberId: 1928297d-159b-43cc-9ea8-1560ba1a595b
                    isSubscribing: true
                    status: active
                    plan: month
                    amount: 170
                    email: kennethchangla@gmail.com
                    nextRenewalDate: '2023-11-21'
                    startAt: '2023-11-20T17:40:35.000Z'
                    maskedCreditCardNo: 400022******1111
                    createdAt: '2023-11-20T17:39:50.000Z'
                    updatedAt: '2023-11-20T17:40:36.000Z'
                  createdAt: '2023-11-10T07:37:42.000Z'
                  updatedAt: '2023-11-10T07:37:42.000Z'
  /api/member/delete-account:
    delete:
      tags:
        - 會員
      summary: delete account
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: succcess
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                type: object
              examples:
                example-0:
                  summary: refund is processing
                  value:
                    data:
                      message: Cannot delete account while refund is processing.
                example-1:
                  summary: reject, subscription plan period
                  value:
                    data:
                      message: >-
                        Cannot delete account while in your subscription plan
                        period.
  /api/member/validate-email:
    get:
      tags:
        - 會員
      summary: mail validate
      security:
        - bearerAuth: []
      parameters:
        - name: signature
          in: query
          schema:
            type: integer
          required: true
          description: link from email, 要有個前端專門處理驗證的畫面
          example: '982677'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: 信箱驗證成功
  /api/member/validate-sms:
    get:
      tags:
        - 會員
      summary: sms validate
      security:
        - bearerAuth: []
      parameters:
        - name: signature
          in: query
          schema:
            type: integer
          required: true
          description: code for sms
          example: '604842'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: 手機號碼驗證成功
  /api/member/term/{term}:
    post:
      tags:
        - 會員
      summary: sign policy
      requestBody:
        content: {}
      security:
        - bearerAuth: []
      parameters:
        - name: term
          in: path
          schema:
            type: string
          required: true
          description: '[required] privacy, user, subscribe'
          example: privacy
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
    get:
      tags:
        - 會員
      summary: get policy
      parameters:
        - name: term
          in: path
          schema:
            type: string
          required: true
          description: '[required] privacy, user, subscribe'
          example: privacy
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 4
                  type: privacy
                  content: Privacy Policy content goes here.
  /api/member/sent-validate-email:
    post:
      tags:
        - 會員
      summary: sent validate email
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                redirectUrl:
                  type: string
                  example: http://localhost:5173
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
  /api/member/upload-avatar:
    post:
      tags:
        - 會員
      summary: upload avatar
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/article/all-topic-latest:
    get:
      tags:
        - 文章
      summary: 首頁文章各主題最新清單
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/article/{id}:
    get:
      tags:
        - 文章
      summary: get article content
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required] article id'
          example: '1'
      responses:
        undefined:
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 123
                  title: 你好，世界
                  content: >-
                    {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Wow,
                    this editor instance exports its content as JSON."}]}]}
                  topic:
                    name: 基本面
                    id: 1
                  author:
                    name: Rick
                    id: 1
                  tags:
                    - name: 毛利
                      id: 1
                  publishDate: '2023-05-02T00:00:00.000Z'
                  previewImage: null
                  type: 1
                  isLimited: true
                  source: null
    put:
      tags:
        - 後台 > 文章
      summary: update article
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - fullContent
                - rawContent
                - topic
                - isLimited
                - isDraft
              properties:
                title:
                  type: string
                  description: ''
                  example: 你好，世界
                fullContent:
                  type: string
                  description: json stringtify
                  example: >-
                    {"type":"dpooc","content":[{"type":"paragraph","content":[{"type":"text","text":"Wow,
                    this editor instance exports its content as JSON."}]}]}
                rawContent:
                  type: string
                  description: ''
                  example: >-
                    <h2><strong>也能懂的 Kotlin Collection 賞玩門道</strong></h2><img
                    src="https://i.imgur.com/2vCuMM9.jpeg"  alt="canyon"
                    width="500"
                    height="600"><p>在開發者的每日工作裡，其實有很大一塊都是在做資料處理。我們抓取、截取、爬取資料，對資料做整理、過濾、轉格式，最後輸出成有系統、有意義的資訊。而在資料處理這一塊，有很大一部份的工作都是跟
                    Collection 有關。Collection
                    簡單來說，就是一群相關聯資料的集合，是個在各程式語言裡普遍常見的資料類型，從最原始的 Array，到重複與否的
                    List、Set，以及 Key-Value 對應的 Map 都屬於這種物件。</p><p>Kotlin
                    團隊深知資料處理的重要性，在標準函式庫（Stan…</
                clippedContent:
                  type: string
                  example: >-
                    {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Wow,
                    this editor instance exports its content as JSON."}]}]}
                topic:
                  type: integer
                  description: ''
                  example: '27'
                tags[]:
                  type: integer
                  example: '2'
                isLimited:
                  type: boolean
                  description: ''
                  example: 'false'
                isDraft:
                  type: boolean
                  description: ''
                  example: 'false'
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required] article id'
          example: '9'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 123
    delete:
      tags:
        - 後台 > 文章
      summary: delete article by id
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required] article id'
          example: '9'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  status: success
  /api/podcast/{id}:
    get:
      tags:
        - 文章
      summary: get podcast content
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required] podcast id, not the one from spotify'
          example: '1'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 1
                  title: EP 89 | 科普就是在妖言惑眾 ft. 怪奇事務所所長
                  content: >-
                    {"description":"你知道嗎？博恩可能把「信度」講錯了喔","spotifyId":"2WJBISLc7sVsJFrSv3hVLk","spotifyLink":"https://open.spotify.com/episode/2WJBISLc7sVsJFrSv3hVLk","applePodcastLink":"https://open.spotify.com/episode/2WJBISLc7sVsJFrSv3hVLk","soundOnLink":"https://open.spotify.com/episode/2WJBISLc7sVsJFrSv3hVLk"}
                  topic:
                    name: 基本面
                    id: 1
                  tags:
                    - name: 毛利
                      id: 1
                  publishDate: '2023-05-02T00:00:00.000Z'
                  previewImage: null
                  type: 0
                  isLimited: false
                  source: null
  /api/article:
    get:
      tags:
        - 文章
      summary: get latest articles
      description: |-
        topic query value

        不傳 -> 全部  
        1 -> 基本面（基本面、總經）  
        2 -> 技術面  
        3 -> 籌碼面  
        4 -> 其他
      parameters:
        - name: topic
          in: query
          schema:
            type: integer
          description: |-
            不傳 -> 全部
            1 -> 基本面（基本面、總經）
            2 -> 技術面
            3 -> 籌碼面
            4 -> 其他
          example: '0'
        - name: page
          in: query
          schema:
            type: integer
          example: '0'
        - name: size
          in: query
          schema:
            type: integer
          example: '30'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  currentPage: 0
                  pageSize: 30
                  totalCount: 515
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
    post:
      tags:
        - 後台 > 文章
      summary: create an article
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - fullContent
                - rawContent
                - clippedContent
                - topic
                - isLimited
                - isDraft
              properties:
                title:
                  type: string
                  description: ''
                  example: 你好，世界
                fullContent:
                  type: string
                  description: json stringtify
                  example: >-
                    {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Wow,
                    this editor instance exports its content as JSON."}]}]}
                rawContent:
                  type: string
                  description: 一般文章上傳，請用 html 格式
                  example: >-
                    <h2><strong>新手也能懂的 Kotlin Collection 賞玩門道</strong></h2><img
                    src="https://i.imgur.com/2vCuMM9.jpeg"  alt="canyon"
                    width="500"
                    height="600"><p>在開發者的每日工作裡，其實有很大一塊都是在做資料處理。我們抓取、截取、爬取資料，對資料做整理、過濾、轉格式，最後輸出成有系統、有意義的資訊。而在資料處理這一塊，有很大一部份的工作都是跟
                    Collection 有關。Collection
                    簡單來說，就是一群相關聯資料的集合，是個在各程式語言裡普遍常見的資料類型，從最原始的 Array，到重複與否的
                    List、Set，以及 Key-Value 對應的 Map 都屬於這種物件。</p><p>Kotlin
                    團隊深知資料處理的重要性，在標準函式庫（Stan…</p>
                clippedContent:
                  type: string
                  description: json stringtify
                  example: >-
                    {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Wow,
                    this editor instance exports its content as JSON."}]}]}
                topic:
                  type: integer
                  description: ''
                  example: '27'
                tags[]:
                  type: integer
                  example: '2'
                isLimited:
                  type: boolean
                  description: ''
                  example: 'false'
                isDraft:
                  type: boolean
                  description: ''
                  example: 'false'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 123
  /api/podcast:
    get:
      tags:
        - 文章
      summary: get latest podcasts
      parameters:
        - name: topic
          in: query
          schema:
            type: integer
          description: |-
            不傳 -> 全部
            1 -> 基本面（基本面、總經）
            2 -> 技術面
            3 -> 籌碼面
            4 -> 其他
          example: '0'
        - name: size
          in: query
          schema:
            type: integer
          example: '30'
        - name: page
          in: query
          schema:
            type: integer
          example: '0'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  currentPage: 0
                  pageSize: 30
                  totalCount: 515
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/authors:
    get:
      tags:
        - 文章
      summary: Authors
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  authors:
                    - name: Rick
                      id: 1
                      avatar: https://path/to/img
                    - name: Riick
                      id: 2
                      avatar: https://path/to/img
  /api/article/{id}/related:
    get:
      tags:
        - 文章
      summary: related articles
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required] article id'
          example: '123'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/image:
    post:
      tags:
        - 後台 > 圖片
      summary: upload image
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  description: ''
                  format: binary
                '':
                  type: string
      security:
        - bearerAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: 檔案上傳成功！
                  imageUrl: >-
                    https://jin-yu-feng-file-bucket.s3.ap-northeast-1.amazonaws.com/1700467448756-sticker
                    (1).png
                  image:
                    id: 2
                    name: 1700467448756-sticker (1).png
                    path: 1700467448756-sticker (1).png
                    creatorType: User
                    creatorId: 8
                    updatedAt: '2023-11-20T08:04:09.443Z'
                    createdAt: '2023-11-20T08:04:09.443Z'
  /api/users:
    get:
      tags:
        - 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
      summary: 後台帳號 list
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  - id: 1
                    name: VossA
                    avatar: https://path/to/avatar
                  - id: 1
                    name: VossB
                    avatar: https://path/to/avatar
                  - id: 1
                    name: VossC
                    avatar: https://path/to/avatar
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  error: permission denied
  /api/user/{id}:
    get:
      tags:
        - 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
      summary: 檢視指定後台帳號
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[ required ] 用戶 id'
          example: '24'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 24
                  account: Vossvoss
                  name: employee
                  avatar: ''
                  role:
                    code: employee24
                    name: employee
                  permissions:
                    - resourceCode: user-resource
                      operation: create
                    - resourceCode: user-resource
                      operation: read
                    - resourceCode: user-resource
                      operation: update
                    - resourceCode: user-resource
                      operation: delete
                    - resourceCode: pdf
                      operation: create
                    - resourceCode: pdf
                      operation: read
                    - resourceCode: pdf
                      operation: update
                    - resourceCode: pdf
                      operation: delete
                    - resourceCode: article
                      operation: create
                    - resourceCode: article
                      operation: read
                    - resourceCode: article
                      operation: update
                    - resourceCode: article
                      operation: delete
                    - resourceCode: paid
                      operation: create
                    - resourceCode: paid
                      operation: read
                    - resourceCode: paid
                      operation: update
                    - resourceCode: paid
                      operation: delete
                    - resourceCode: paid
                      operation: read
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: permission denied
    delete:
      tags:
        - 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
      summary: 刪除指定後台帳號
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required]'
          example: '30'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
        '403':
          description: Forbidden
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: permission denied
  /api/user/{id}/update-password:
    post:
      tags:
        - 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
      summary: 更新指定後台帳號密碼
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                password:
                  type: string
                  example: password
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          example: '24'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
        '403':
          description: Forbidden
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: permission denied
  /api/user/{id}/permission:
    post:
      tags:
        - 後台 > 帳戶 > Admin（後台管理員-管理後台帳號）
      summary: 更新指定用戶權限
      description: 傳入該員工需要的所有權限，沒傳的權限會刪除，有新增的權限會新增
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                permissions[0][resourceCode]:
                  type: string
                  example: pdf
                permissions[0][operation]:
                  type: string
                  example: read
                permissions[1][resourceCode]:
                  type: string
                  example: article
                permissions[1][operation]:
                  type: string
                  example: delete
                permissions[2][resourceCode]:
                  type: string
                  example: backend
                permissions[2][operation]:
                  type: string
                  example: update
      parameters:
        - name: id
          in: path
          schema:
            type: integer
          required: true
          description: '[required]'
          example: '28'
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/dashboard/members:
    get:
      tags:
        - 後台 > 帳戶
      summary: 取得前台使用者列表
      parameters:
        - name: subscription
          in: query
          schema:
            type: string
          description: '`is_subscribing` / `renewal_disabled` / `finished` / `none`'
        - name: refund_status
          in: query
          schema:
            type: string
          description: '`waiting` / `refunded`'
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/user/create:
    post:
      tags:
        - 後台 > 帳戶
      summary: 創建內部帳戶
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                account:
                  type: string
                  description: '[ required ] '
                  example: KennyRich
                password:
                  type: string
                  description: '[ required ] '
                  example: KennyRich
                name:
                  type: string
                  example: Rich
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: permission denied
  /api/user/login:
    post:
      tags:
        - 後台 > 帳戶
      summary: 登入內部帳戶
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - account
                - password
              properties:
                account:
                  type: string
                  description: 最少六位英數
                  example: Kenny555
                password:
                  type: string
                  description: 最少六位英數
                  example: Kenny555
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  accessToken: YOUR_ACCESS_TOKEN
                  refreshToken: YOUR_REFRESH_TOKEN
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: Invalid username or password.
  /api/user/refresh:
    post:
      tags:
        - 後台 > 帳戶
      summary: 刷新內部帳戶 refresh token
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
                  example: '{{refresh_token}}'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  accessToken: YOUR_ACCESS_TOKEN
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: Invalid username or password.
  /api/user:
    get:
      tags:
        - 後台 > 帳戶
      summary: 檢視自己後台帳號資料
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 11
                  account: Remus88888
                  name: Remus88888
                  avatar: https://
                  role:
                    code: admin
                    name: admin
                  permissions:
                    - resourceCode: user-resource
                      operation: create
                    - resourceCode: user-resource
                      operation: read
                    - resourceCode: user-resource
                      operation: update
                    - resourceCode: user-resource
                      operation: delete
                    - resourceCode: pdf
                      operation: create
                    - resourceCode: pdf
                      operation: read
                    - resourceCode: pdf
                      operation: update
                    - resourceCode: pdf
                      operation: delete
                    - resourceCode: article
                      operation: create
                    - resourceCode: article
                      operation: read
                    - resourceCode: article
                      operation: update
                    - resourceCode: article
                      operation: delete
                    - resourceCode: permission
                      operation: read
                    - resourceCode: permission
                      operation: update
                    - resourceCode: paid
                      operation: read
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: permission denied
  /api/user/update-information:
    post:
      tags:
        - 後台 > 帳戶
      summary: 內部帳戶更新自己個人資訊
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Remus88888
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
  /api/user/upload-avatar:
    post:
      tags:
        - 後台 > 帳戶
      summary: 內部帳戶更新自己個人頭像
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  description: user avatar
                  format: binary
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  url: https://path/to/avatar
  /api/user/update-password:
    post:
      tags:
        - 後台 > 帳戶
      summary: 內部帳戶更新自己密碼
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                password:
                  type: string
                  example: hashpassword
                oldPassword:
                  type: string
                  example: hashpassword
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
  /api/dashboard/upsert-refund-amount:
    post:
      tags:
        - 後台 > 訂閱 & 發票
      summary: 完成退費 (i.e. 編輯已退款金額)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                memberId: 1
                subscriptionId: 15
                amount: 2888
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 4
                  memberId: 6
                  isSubscribing: false
                  status: canceled
                  isRefunded: true
                  plan: month
                  amount: 6888
                  email: test@gnim.com
                  nextRenewalDate: '2023-12-04'
                  startAt: '2023-11-04T10:10:47.000Z'
                  endAt: null
                  canceledAt: '2023-11-10T10:10:47.000Z'
                  refundedAt: '2023-11-12T10:10:47.000Z'
                  companyUniformSerialNo: '12345678'
                  maskedCreditCardNo: 400022******1111
                  createdAt: '2023-11-04T10:05:47.000Z'
                  updatedAt: '2023-11-04T10:05:47.000Z'
                  bills:
                    - id: 12
                      memberId: 6
                      subscriptionId: 4
                      type: refund
                      plan: month
                      startAt: null
                      endAt: null
                      amount: 2888
                      taxAmount: 300
                      createdAt: '2023-10-04T10:05:47.000Z'
                    - id: 10
                      memberId: 6
                      subscriptionId: 4
                      type: payment
                      plan: month
                      startAt: '2023-10-04T10:10:47.000Z'
                      endAt: '2023-11-04T10:10:47.000Z'
                      amount: 6888
                      taxAmount: 300
                      maskedCreditCardNo: 400022******1111
                      createdAt: '2023-10-04T10:05:47.000Z'
  /api/pdf/trial:
    put:
      tags:
        - 後台 > 試閱
      summary: 上傳試閱 pdf
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  description: upload
                  format: binary
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
    get:
      tags:
        - 試閱
      summary: get trial pdf link
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data: >-
                  https://jing-yu-feng-pdf-bucket.s3.ap-northeast-1.amazonaws.com/trial.pdf
  /api/companyFilters:
    get:
      tags:
        - 後台 > 公司群組
      summary: 獲得群組內容
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/podcast/callback:
    get:
      tags:
        - 後台 > podcast
      summary: get spotify token
      security:
        - noauthAuth: []
      parameters:
        - name: code
          in: query
          schema:
            type: string
          example: >-
            AQCWh1OT9nfQZIWn3Wru_4IC0sGvedCEy7qF8fb-uAunk3D3SWnooHFaah55WfPGVc1U73lU1Tgew4pbUBeSftDoGbnQcfEKHhKHTIBrN4lVODeuC2vRxZlXUjyIufGr5stAeGGoVwCf9ubSv09lM0xIuuBdKfduuXTRftPGD8SBN805oQ_HH6X_BJVSA21jIBMk5l__pKkRR-ZjDX2w4CG4PjQ3qTak1vMIVVkCzRMIZLjmRXo7SuupWSTK
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/podcast/login:
    get:
      tags:
        - 後台 > podcast
      summary: request auth link
      security:
        - noauthAuth: []
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                name: spotify
                accessToken: >-
                  BQCVnEsPREDEP1lJK-tvQG0hojF_C-c3GNC8Kj7IEM6W0GIhmolZc9NBWdJwifVXxh-zNOLqzrfZE0FFX8_Y3K_gF9YaSrE0w_oz-KEE6WhUB6YAZb0CXYaMmqYmUBHYDb-rdu6N5j5PN63hyogMFDSMIvlK1elJpEXLYE0gQ_GvMLCLBWVs942JgmKzse-vsUlzGJvLKv90-Kz0HT-kvQ
                refreshToken: >-
                  AQC7YFfGSLS0yWQAWPykmiJUauAvtmgm6QOH5zcHR2tEDAmD4l_elGgvuoDF6Jg0M21uiUryncR6O_iVzZu-Cdib5m9K6mTTPIx6cx5Uajrn3VkUjKhzFtS_zEm1S9zcBQk
                expir: '2023-11-20T22:05:35.056Z'
                createdAt: '2023-11-20T21:04:22.000Z'
                updatedAt: '2023-11-20T21:15:35.055Z'
  /api/podcast/episode/latest:
    get:
      tags:
        - 後台 > podcast
      summary: latest episode
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                href: >-
                  https://api.spotify.com/v1/shows/2l21dV5M1Z1wKTChoXdHal/episodes?offset=0&limit=1
                items:
                  - audio_preview_url: >-
                      https://podz-content.spotifycdn.com/audio/clips/0l2pkT89zUrjBtDbDcloXK/clip_448069_508069.mp3
                    description: >-
                      💡本集重點 1. 記憶體報價分析 2. 記憶體庫存分析 3. 記憶體廠商個別故事 
                      記憶體隨著AI出現，而拉高規格帶動DDR5。記憶體屬於景氣循環股，大概是六到八季為一循環。今年6月時我們蒐集報告後認為記憶體谷底已過，可是到了8月記憶體平均價格依然下跌，幸好8月底的報價有稍微回升 
                      記憶體的復甦可以從市場訊息得知，目前終端通路庫存水位下降，至少可以開始消化原廠的庫存。近期的盤勢震盪，在操作上比較適合找低基期、低評價的個股，今天Elvis提供幾個有故事的個股跟大家分享 
                      Powered by Firstory Hosting
                    duration_ms: 1270846
                    explicit: false
                    external_urls:
                      spotify: https://open.spotify.com/episode/1FFrTaBgvKerZDwV2LvQ3B
                    href: https://api.spotify.com/v1/episodes/1FFrTaBgvKerZDwV2LvQ3B
                    html_description: >-
                      <p>&#x1f4a1;本集重點 <br />1. 記憶體報價分析 <br />2. 記憶體庫存分析 <br
                      />3. 記憶體廠商個別故事 <br /> <br
                      />記憶體隨著AI出現&#xff0c;而拉高規格帶動DDR5。記憶體屬於景氣循環股&#xff0c;大概是六到八季為一循環。今年6月時我們蒐集報告後認為記憶體谷底已過&#xff0c;可是到了8月記憶體平均價格依然下跌&#xff0c;幸好8月底的報價有稍微回升
                      <br /> <br
                      />記憶體的復甦可以從市場訊息得知&#xff0c;目前終端通路庫存水位下降&#xff0c;至少可以開始消化原廠的庫存。近期的盤勢震盪&#xff0c;在操作上比較適合找低基期、低評價的個股&#xff0c;今天Elvis提供幾個有故事的個股跟大家分享</p>
                      <br /> <br />Powered by <a href="https://firstory.me"
                      rel="nofollow">Firstory Hosting</a>
                    id: 1FFrTaBgvKerZDwV2LvQ3B
                    images:
                      - height: 640
                        url: >-
                          https://i.scdn.co/image/ab6765630000ba8aa75c733577d66a77dbbb2fb2
                        width: 640
                      - height: 300
                        url: >-
                          https://i.scdn.co/image/ab67656300005f1fa75c733577d66a77dbbb2fb2
                        width: 300
                      - height: 64
                        url: >-
                          https://i.scdn.co/image/ab6765630000f68da75c733577d66a77dbbb2fb2
                        width: 64
                    is_externally_hosted: false
                    is_playable: true
                    language: zh
                    languages:
                      - zh
                    name: 2023.09.22 【基本點線面】景氣循環股｜谷底走了好久｜記憶體
                    release_date: '2023-09-22'
                    release_date_precision: day
                    type: episode
                    uri: spotify:episode:1FFrTaBgvKerZDwV2LvQ3B
                limit: 1
                next: >-
                  https://api.spotify.com/v1/shows/2l21dV5M1Z1wKTChoXdHal/episodes?offset=1&limit=1
                offset: 0
                previous: null
                total: 147
  /api/podcast/episode/all:
    get:
      tags:
        - 後台 > podcast
      summary: all-episode
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/podcast/soundon:
    get:
      tags:
        - 後台 > podcast
      summary: get soundon episode
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/podcast/apple:
    get:
      tags:
        - 後台 > podcast
      summary: get apple podcast episode
      security:
        - noauthAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
          description: 回傳資料總數，預設是 300
          example: '300'
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/topic-tag:
    get:
      tags:
        - 標籤、主題
      summary: 前臺 get tags with topics
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  topics:
                    - id: 1
                      name: 基礎面
                      tags:
                        - id: 1
                          name: 毛利
                    - id: 2
                      name: 技術面面
                      tags:
                        - id: 1
                          name: 毛利
  /api/topic-all:
    get:
      tags:
        - 標籤、主題
      summary: 後台 get all topic with tag
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  topics:
                    - id: 1
                      name: 基礎面
                      tags:
                        - id: 1
                          name: 毛利
                          sort: 1
                          hide: true
                    - id: 2
                      name: 技術面面
                      tags:
                        - id: 1
                          name: 毛利
                          sort: 1
                          hide: false
  /api/tag:
    post:
      tags:
        - 標籤、主題
      summary: 後台 新增標籤
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - topic
                - hide
              properties:
                name:
                  type: string
                  description: ''
                  example: 布林通道
                topic:
                  type: integer
                  description: topic 類的 id
                  example: '1'
                hide:
                  type: boolean
                  description: ''
                  example: 'true'
                '':
                  type: string
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
        '404':
          description: Not Found
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: not found
    delete:
      tags:
        - 標籤、主題
      summary: 後台 刪除標籤
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
        '404':
          description: Not Found
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: not found
  /api/edit-tags-display-setting:
    post:
      tags:
        - 標籤、主題
      summary: 後台  edit tags display setting
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                tags[0][id]:
                  type: integer
                  example: '1'
                tags[0][name]:
                  type: string
                  example: a tag
                tags[0][hide]:
                  type: boolean
                  example: 'false'
                tags[1][id]:
                  type: integer
                  example: '3'
                tags[1][name]:
                  type: string
                  example: c tag
                tags[1][hide]:
                  type: boolean
                  example: 'true'
                tags[2][id]:
                  type: integer
                  example: '4'
                tags[2][name]:
                  type: string
                  example: b tag
                tags[2][hide]:
                  type: boolean
                  example: 'false'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
  /api/tag/{id}:
    put:
      tags:
        - 標籤、主題
      summary: 後台 update tag
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - hide
              properties:
                name:
                  type: string
                  description: ''
                  example: new name
                hide:
                  type: boolean
                  description: boolean
                  example: 'true'
      parameters:
        - name: id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  message: success
  /api/banner:
    get:
      tags:
        - Banner
      summary: get Banner content
      description: |-
        type 是指資料類型， source 指某類型的來源(yt type source from which channel)

        article type:  
        0 -> podcast

        1 -> tiptap article

        2 -> youtube

        source:  
        null -> 文章、podcast

        1 -> 金玉峰 yt 頻道

        2 -> 股耐 yt 頻道
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  - id: 1
                    title: 你好，世界
                    description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                    topic:
                      name: 基本面
                      id: 1
                    author:
                      name: Rick
                      id: 1
                    tags:
                      - name: 毛利
                        id: 1
                    publishDate: '2023-11-11T00:00:00.000Z'
                    previewImage: null
                    type: 1
                    isLimited: true
                    source: null
                  - id: 2
                    title: 雪烏龍
                    description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                    topic:
                      name: 總經
                      id: 2
                    author:
                      name: Rick
                      id: 1
                    tags:
                      - name: 毛利
                        id: 1
                    publishDate: '2023-11-10T00:00:00.000Z'
                    previewImage: https://path/to/image
                    type: 1
                    isLimited: false
                    source: 1
  /api/news:
    get:
      tags:
        - 新聞
      summary: 新聞列表
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              examples:
                example-0:
                  summary: 新聞列表-if db
                  value:
                    data:
                      - title: 中碳躋身半導體鏈 中鋼小金雞變身大金鵬
                        time: '2023-05-02T00:00:00.000Z'
                        link: >-
                          https://money.udn.com/money/story/5612/7495944?from=edn_newestlist_rank'
                        rate: 0
                        tag:
                          name: 半導體
                          id: 123
                      - title: 中碳躋身半導體鏈 中鋼小金雞變身大金鵬
                        time: '2023-05-02T00:00:00.000Z'
                        link: >-
                          https://money.udn.com/money/story/5612/7495944?from=edn_newestlist_rank'
                        rate: 0
                        tag:
                          name: 半導體
                          id: 123
                example-1:
                  summary: 新聞列表 -if not save in db
                  value:
                    data:
                      - title: 中碳躋身半導體鏈 中鋼小金雞變身大金鵬
                        time: '2023-05-02T00:00:00.000Z'
                        link: >-
                          https://money.udn.com/money/story/5612/7495944?from=edn_newestlist_rank'
                        rate: 0
                        tag: 半導體
                      - title: 中碳躋身半導體鏈 中鋼小金雞變身大金鵬
                        time: '2023-05-02T00:00:00.000Z'
                        link: >-
                          https://money.udn.com/money/story/5612/7495944?from=edn_newestlist_rank'
                        rate: 0
                        tag: 半導體
  /api/search/query:
    get:
      tags:
        - 搜尋
      summary: query
      parameters:
        - name: q
          in: query
          schema:
            type: string
          required: true
          description: ''
          example: 手
        - name: page
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
        - name: size
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '30'
        - name: topic
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  currentPage: 0
                  pageSize: 30
                  totalCount: 515
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/search/author:
    get:
      tags:
        - 搜尋
      summary: author
      parameters:
        - name: author
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '1'
        - name: page
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
        - name: size
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '30'
        - name: topic
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  currentPage: 0
                  pageSize: 30
                  totalCount: 515
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/search/tag:
    get:
      tags:
        - 搜尋
      summary: get by tag
      parameters:
        - name: tag
          in: query
          schema:
            type: integer
          required: true
          description: tag id
          example: '1'
        - name: page
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
        - name: size
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '30'
        - name: topic
          in: query
          schema:
            type: integer
          required: true
          description: ''
          example: '0'
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  currentPage: 0
                  pageSize: 30
                  totalCount: 515
                  articles:
                    - id: 1
                      title: 你好，世界
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 基本面
                        id: 1
                      author:
                        name: Rick
                        id: 1
                      tags:
                        - name: 毛利
                          id: 1
                      publishDate: '2023-11-11T00:00:00.000Z'
                      previewImage: null
                      type: 1
                      isLimited: true
                      source: null
                    - id: 2
                      title: 雪烏龍
                      description: 揭示股市投資中的基本面因素，包括公司財務狀況、產品競爭力、行業趨勢等，為投資者提供深入了解企業價值的觀點
                      topic:
                        name: 總經
                        id: 2
                      author:
                        name: Rick
                        id: 1
                      publishDate: '2023-11-10T00:00:00.000Z'
                      previewImage: https://path/to/image
                      type: 1
                      isLimited: false
                      source: null
  /api/subscription/latest-plan:
    get:
      tags:
        - 訂閱
      summary: 取得會員訂閱狀態
      description: |-
        1\. 訂閱狀態 `status`:

        - 訂閱中 `active`
        - 已取消 `canceled`
        - 已關閉自動續訂 `renewal_disabled`
            

        2\. 判斷是否在訂閱資格期間：以回傳欄位 `isSubscribing` 為準

        3\. 是否已退款：以 `isRefunded` 欄位為準
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              examples:
                example-0:
                  summary: 使用者訂閱中
                  value:
                    data:
                      id: 3
                      memberId: 5
                      isSubscribing: true
                      status: active
                      plan: month
                      amount: 6888
                      email: test@gnim.com
                      nextRenewalDate: '2023-12-04'
                      startAt: '2023-11-04T10:10:47.000Z'
                      endAt: null
                      companyUniformSerialNo: '12345678'
                      maskedCreditCardNo: 400022******1111
                      createdAt: '2023-11-04T10:05:47.000Z'
                      updatedAt: '2023-11-04T10:05:47.000Z'
                example-1:
                  summary: 使用者取消訂閱，未退款未到期
                  value:
                    data:
                      id: 3
                      memberId: 5
                      isSubscribing: true
                      isRefunded: false
                      status: canceled
                      plan: month
                      amount: 6888
                      email: test@gnim.com
                      nextRenewalDate: '2023-12-04'
                      startAt: '2023-11-04T10:10:47.000Z'
                      endAt: null
                      canceledAt: '2023-11-10T10:10:47.000Z'
                      refundedAt: null
                      companyUniformSerialNo: '12345678'
                      maskedCreditCardNo: 400022******1111
                      createdAt: '2023-11-04T10:05:47.000Z'
                      updatedAt: '2023-11-04T10:05:47.000Z'
                example-2:
                  summary: 使用者取消訂閱，已退款已到期
                  value:
                    data:
                      id: 3
                      memberId: 5
                      isSubscribing: false
                      isRefunded: true
                      status: canceled
                      plan: month
                      amount: 6888
                      email: test@gnim.com
                      nextRenewalDate: '2023-12-04'
                      startAt: '2023-11-04T10:10:47.000Z'
                      endAt: '2023-11-04T10:10:47.000Z'
                      canceledAt: '2023-11-10T10:10:47.000Z'
                      refundedAt: '2023-11-11T10:10:47.000Z'
                      companyUniformSerialNo: '12345678'
                      maskedCreditCardNo: 400022******1111
                      createdAt: '2023-11-04T10:05:47.000Z'
                      updatedAt: '2023-11-04T10:05:47.000Z'
                example-3:
                  summary: 使用者目前未訂閱
                  value:
                    data: null
  /api/subscription/bills:
    get:
      tags:
        - 訂閱
      summary: 取得付款紀錄
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                currentPage: 0
                pageSize: 30
                totalCount: 515
                data:
                  - id: 14
                    memberId: 5
                    subscriptionId: 3
                    plan: month
                    type: payment
                    startAt: '2023-11-04T10:10:47.000Z'
                    endAt: '2023-12-04T10:10:47.000Z'
                    amount: 6888
                    taxAmount: 300
                    maskedCreditCardNo: 400022******1111
                    createdAt: '2023-11-04T10:05:47.000Z'
                  - id: 6
                    memberId: 5
                    subscriptionId: 3
                    plan: month
                    type: payment
                    startAt: '2023-10-04T10:10:47.000Z'
                    endAt: '2023-11-04T10:10:47.000Z'
                    amount: 6888
                    taxAmount: 300
                    maskedCreditCardNo: 400022******1111
                    createdAt: '2023-10-04T10:05:47.000Z'
  /api/subscription/request-payment-payload:
    post:
      tags:
        - 訂閱
      summary: 要求藍新付款  (使用者確認付款)
      description: >-
        Request 參數：


        1. \* plan: 訂閱方案, valid inputs: \["month", "quarter", "year"\]

        2. \* returnUrl: 完成藍新付款後要前往的前端 URL

        3. \* backUrl: 取消付款後要前往的前端 URL
            
        4. companyUniformSerialNo: 公司發票統編
            

        Response：將兩個回傳參數直接以 POST Form 表單帶往藍新的付款 URL  

        藍新測試站：[https://ccore.newebpay.com/MPG/period](https://ccore.newebpay.com/MPG/period)  

        藍新正式站：[https://core.newebpay.com/MPG/period](https://core.newebpay.com/MPG/period)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                plan: month
                companyUniformSerialNo: '12345678'
                returnUrl: https://gnim.com.tw/payment-completed
                backUrl: https://gnim.com.tw/payment-canceled
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  MerchantID_: MS350610354
                  PostData_: >-
                    fc22f8e6a80a8b168d990de07bb43dcf892da53d99a8a2cb1a4700c9ae26c4a2cdbfea96bdb02628359bdbcbe04c162f3182a0c434139330c073f22b11466143809966b521656e16f6a1f420492d860d992248eafc709e3aa70479ecf73f9f31ff3c509b82e1dc04f7a8a129a89eac69c61ada86d536dbfc9ce7dbb2e024b14677b3752bbc9fafd7d598b88321a72e8a54a9bbe7b93db91a9ecc87480d3ff6b497cd0801c21e6c2ad3cd78f9a434955c974845e59d1ec93415fac7ca7dfae2073deca4a978841ee96960fb28eee82b0102b7be84362d2f1e1c8091ab9a2e7c31d0b4865c3244b7fa8911b1b5a5323cda71467e986d270c32fe5cbaf976efd74a7b56ff9e7eab97e5e0979ee3f2b2c200993b9656ca7f6a88c06977d4abd6c30799ca90ca4051255855693a81ba98cbd0ee3d324cbadd8c7368530e9f3b0dbe1959db96506b9505d47a3a3f309569578e
  /api/subscription/re-request-payment-payload:
    post:
      tags:
        - 訂閱
      summary: 重新要求藍新付款 (更新付款資料)
      description: |-
        參數幾乎同「要求藍新付款」，

        此 API 不同的地方在於用途，  
        當使用者已經有一筆有效的訂閱資格，但要更改付款資訊、Email 時，使用此 API，  
        更新付款資訊不允許更換方案，因此 Request 不需傳入 `plan` 參數。

        companyUniformSerialNo 統編欄位，如不傳入，預設沿用上一筆訂閱設定，如傳入 null，代表新的訂閱資料不使用統編。
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                companyUniformSerialNo: '12345678'
                returnUrl: https://gnim.com.tw/payment-completed
                backUrl: https://gnim.com.tw/payment-canceled
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /api/subscription/change-plan:
    post:
      tags:
        - 訂閱
      summary: 更換方案
      description: 用來讓使用者更換方案，更換後回傳新的訂閱資訊。
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                newPlan: quarter
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 3
                  memberId: 5
                  status: subscription-status-string
                  plan: quarter
                  autoRenewal: true
                  amount: 16888
                  email: test@gnim.com
                  nextRenewalDate: '2024-02-04'
                  startAt: '2023-11-04T10:10:47.000Z'
                  endAt: null
                  companyUniformSerialNo: '12345678'
                  maskedCreditCardNo: 400022******1111
                  createdAt: '2023-11-04T10:05:47.000Z'
                  updatedAt: '2023-11-04T10:05:47.000Z'
  /api/subscription/configure-auto-renewal:
    post:
      tags:
        - 訂閱
      summary: 啟用或關閉自動續訂
      description: |-
        參數：

        1. `active`: boolean，是否啟用自動續訂
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                active: true
      responses:
        '200':
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
          content:
            application/json:
              schema:
                type: object
              example:
                data:
                  id: 3
                  memberId: 5
                  status: subscription-status-string
                  plan: month
                  autoRenewal: false
                  amount: 6888
                  email: test@gnim.com
                  nextRenewalDate: '2023-12-04'
                  startAt: '2023-11-04T10:10:47.000Z'
                  endAt: null
                  companyUniformSerialNo: '12345678'
                  maskedCreditCardNo: 400022******1111
                  createdAt: '2023-11-04T10:05:47.000Z'
                  updatedAt: '2023-11-04T10:05:47.000Z'
  /api/subscription/cancel-and-request-refund:
    post:
      tags:
        - 訂閱
      summary: 取消訂閱
      requestBody:
        content: {}
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
